<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Combat Extended</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<!-- == Saddlebag == -->
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="Pony_SaddleBag"]/statBases</xpath>
					<value>
						<Bulk>3</Bulk>
					</value>
				</li>

				<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="Pony_SaddleBag"]/equippedStatOffsets</xpath>
					<value>
						<equippedStatOffsets>
							<CarryBulk>40</CarryBulk>
						</equippedStatOffsets>
					</value>
				</li>

				<!-- Note: Changing the layer and body part coverage modified like below cause 
					the saddlebags to either not render at all or render as a shirt. -->
				<!-- <li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="Pony_SaddleBag"]/apparel/bodyPartGroups</xpath>
					<value>
						<bodyPartGroups>
							<li>Torso</li>
						</bodyPartGroups>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="Pony_SaddleBag"]/apparel/layers</xpath>
					<value>
						<layers>
							<li>Webbing</li>
						</layers>
					</value>
				</li> -->

				<!-- == Battle Saddle == -->
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="Pony_BattleSaddle"]/statBases</xpath>
					<value>
						<Bulk>3</Bulk>
					</value>
				</li>

				<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="Pony_BattleSaddle"]/equippedStatOffsets</xpath>
					<value>
						<equippedStatOffsets>
							<CarryBulk>20</CarryBulk> <!-- Enough to carry something like an assault rifle. -->
						</equippedStatOffsets>
					</value>
				</li>

				<!-- Layer and body part coverage are unchanged. -->

			</operations>
		</match>
	</Operation>
</Patch>
